(function(f){var d=f.Calendarista||{};d.createDelegate=function(c,a){return function(){return a.apply(c,arguments)}};d.createCallback=function(c,a,b){return function(){var e=arguments.length;if(e>0){for(var g=[],h=0;h<e;h++)g[h]=arguments[h];g[e]=b;return c.apply(a||this,g)}return c.call(a||this,b)}};f.Calendarista||(f.Calendarista=d)})(window);
(function(f){var d=f.Calendarista||function(){};d.Cookie=function(){};d.Cookie.create=function(c,a,b){var e;if(b){e=new Date;e.setTime(e.getTime()+b*24*60*60*1E3);b="; expires="+e.toGMTString()}else b="";document.cookie=c+"="+a+b+"; path=/"};d.Cookie.read=function(c){c=c+"=";var a=document.cookie.split(";"),b,e;for(e=0;e<a.length;e++){for(b=a[e];b.charAt(0)==" ";)b=b.substring(1,b.length);if(b.indexOf(c)==0)return b.substring(c.length,b.length)}return null};d.Cookie.erase=function(c){d.Cookie.create(c,
"",-1)};d.Cookie.destroy=function(){};f.Calendarista||(f.Calendarista=d)})(window);
(function(f,d){d.ajax=function(c){this.init(c);this.destroyDelegate=d.createDelegate(this,this.destroy);f(window).on("unload",this.destroyDelegate)};d.ajax.prototype.init=function(c){this.options=c;this.id=c.id;this.ajaxUrl=c.ajaxUrl};d.ajax.prototype.navButtonState=function(c){(function(a,b,e,g){var h;if(typeof b.appointment!=="undefined"){h=b.appointment;b=f("#"+g);if([0,1].indexOf(h)!==-1)b=f(".ui-dialog-buttonset."+g);g=b.find('button[name="next"]');b.find('button[name="prev"]');if(g.length>0)if(a.flag1||
!e&&g[0].hasAttribute("disabled"))a.flag1=!a.flag1;else e?g.prop("disabled",false).removeClass("ui-state-disabled"):g.prop("disabled",true).addClass("ui-state-disabled")}})(this,this.options,c,this.id)};d.ajax.prototype.request=function(c,a,b){(function(e,g,h,i){i.showSpinner();i.navButtonState(false);f.post(i.ajaxUrl,h,function(k){g.call(e,k);i.hideSpinner();i.navButtonState(true)})})(c,a,b,this)};d.ajax.prototype.showSpinner=function(){f("#spinner_"+this.id).removeClass("calendarista-invisible")};
d.ajax.prototype.hideSpinner=function(){f("#spinner_"+this.id).addClass("calendarista-invisible")};d.ajax.prototype.destroy=function(){if(this.destroyDelegate){f(window).off("unload",this.destroyDelegate);delete this.destroyDelegate}}})(window.jQuery,window.Calendarista);
(function(f,d){d.wizard=function(c){this.init(c);this.destroyDelegate=d.createDelegate(this,this.destroy);f(window).on("unload",this.destroyDelegate)};d.wizard.prototype.init=function(c){this.id=c.id;this.wizardAction=c.wizardAction;this.ajaxUrl=c.ajaxUrl;this.requestUrl=c.requestUrl;this.ajax=new d.ajax({ajaxUrl:this.ajaxUrl,id:this.id});this.prevIndex=c.prevIndex;this.nextIndex=c.nextIndex;this.stepCounter=c.stepCounter;this.appointment=c.appointment;this.selectedStepName=c.selectedStepName;this.selectedStepIndex=
c.selectedStepIndex;this.invoiceId=c.invoiceId;this.steps=c.steps;this.externalDialog=c.externalDialog;this.$footer=this.$root=f("#"+this.id);if(this.externalDialog)this.$footer=f(".ui-dialog-buttonset."+this.id);this.initAjaxElements()};d.wizard.prototype.initAjaxElements=function(){var c,a,b,e=this;this.$form=this.$root.find("form");this.$prevButton=this.$footer.find('button[name="prev"]');this.$nextButton=this.$footer.find('button[name="next"]');this.$bookNowButton=this.$footer.find('button[name="booknow"]');
this.$disposeButton=this.$footer.find('button[name="dispose"]');this.$tabItemLinks=this.$root.find(".nav-item a");this.prevButtonClickDelegate=d.createDelegate(this,this.prevButtonClick);this.$prevButton.on("click",this.prevButtonClickDelegate);this.nextButtonClickDelegate=d.createDelegate(this,this.nextButtonClick);this.$nextButton.on("click",this.nextButtonClickDelegate);this.disposeButtonClickDelegate=d.createDelegate(this,this.closeDialogClick);this.$disposeButton.on("click",this.disposeButtonClickDelegate);
this.$tabItemLinks.on("click",function(g){var h=f(g.currentTarget);g.preventDefault();h.prop("disabled")||e.request(parseInt(h.attr("data-calendarista-index"),10));return false});this.createAppointment();for(c=0;c<this.$tabItemLinks.length;c++){a=f(this.$tabItemLinks[c]);b=parseInt(a.attr("data-calendarista-index"),10);if(b===this.selectedStepIndex||this.appointment!==1&&b>this.selectedStepIndex){a.prop("disabled",true);a.addClass("calendarista-disabled disabled")}}};d.wizard.prototype.createAppointment=
function(){if(this.$prevButton.length>0){this.$prevButton.prop("disabled",true).addClass("ui-state-disabled");this.$prevButton.val(this.prevIndex);this.prevIndex>0&&this.$prevButton.prop("disabled",false).removeClass("ui-state-disabled")}if(this.$nextButton.length>0){this.$nextButton.prop("disabled",true).addClass("ui-state-disabled");this.$nextButton.val(this.nextIndex)}this.$bookNowButton.length>0&&this.$bookNowButton.prop("disabled",true).addClass("ui-state-disabled");if(this.nextIndex<=this.stepCounter)this.$nextButton.length>
0&&!this.$nextButton[0].hasAttribute("data-calendarista-closed")&&this.$nextButton.prop("disabled",false).removeClass("ui-state-disabled");else this.$bookNowButton.length>0&&this.nextIndex===this.stepCounter+1&&this.$bookNowButton.prop("disabled",false).removeClass("ui-state-disabled")};d.wizard.prototype.navButtonClick=function(c){c.preventDefault();this.request(parseInt(f(c.target).val(),10))};d.wizard.prototype.prevButtonClick=function(c){c.preventDefault();this.request(parseInt(this.$prevButton.val(),
10))};d.wizard.isValid=function(c,a){var b=true;a||(a=".calendarista_parsley_validated, .woald_parsley_validated");c.find(a).each(function(){var e=f(this);if(e.prop("type")!=="hidden"&&(!e.is(":visible")||e.is(":disabled")||e.attr("data-parsley-excluded")))return true;e.parsley().reset();e=e.parsley?e.parsley().validate():true;if(e!==null&&typeof e==="object"&&e.length>0)b=false});return b};d.wizard.prototype.nextButtonClick=function(c){c.preventDefault();var a=this.$root.find('input[name="multiDateSelection"]');
c=this.$root.find('input[name="bookingDaysMinimum"]');c=c.length>0?parseInt(c.val(),10):0;a=(a=a.val())?a.split(";"):[];d.wizard.isValid(this.$root,a.length>0&&(!c||a.length>=c)?".calendarista-dynamicfield.calendarista_parsley_validated":null)?this.request(parseInt(this.$nextButton.val(),10)):this.scrollTop()};d.wizard.prototype.closeDialogClick=function(c){c.preventDefault();this.destroy()};d.wizard.prototype.request=function(c){var a=this.$form.serializeArray();a.push({name:"selectedStep",value:c});
a.push({name:"action",value:this.wizardAction});this.ajax.request(this,this.response,f.param(a))};d.wizard.prototype.response=function(c){this.destroy();this.$root=this.$root.replaceWith(c);this.scrollTop()};d.wizard.prototype.scrollTop=function(){var c=f("#navbar_"+this.id);c.length>0&&c[0].scrollIntoView({block:"center",behaviour:"smooth"})};d.wizard.prototype.destroy=function(){this.$prevButton&&this.$prevButton.off();this.$nextButton&&this.$nextButton.off();this.$tabItemLinks&&this.$tabItemLinks.off();
this.$disposeButton&&this.$disposeButton.off("click",this.disposeButtonClickDelegate);delete this.$bookNowButton;delete this.bookNowButtonClickDelegate;delete this.prevButtonClickDelegate;delete this.$prevButton;delete this.nextButtonClickDelegate;delete this.$nextButton;delete this.$tabItemLinks;delete this.$footer;delete this.$disposeButton;delete this.disposeButtonClickDelegate;if(this.destroyDelegate){f(window).off("unload",this.destroyDelegate);delete this.destroyDelegate}}})(window.jQuery,window.Calendarista);
(function(f,d,c){d.calendar=function(a){this.init(a);this.unloadDelegate=d.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};d.calendar.prototype.init=function(a){this.id=a.id;this.$root=f("#"+this.id);this.actionWizard="calendarista_wizard";this.actionGetAllAvailabilities="calendarista_get_all_availabilities";this.actionMonthChange="calendarista_calendar_month_change";this.actionStartDaySelected="calendarista_calendar_start_day_selected";this.actionEndDaySelected="calendarista_calendar_end_day_selected";
this.actionSeats="calendarista_seats";this.actionDynamicFields="calendarista_dynamic_fields";this.actionCostSummary="calendarista_cost_summary";this.actionBookMore="calendarista_bookmore";this.actionRepeat="calendarista_repeat";this.timeslotCalendarModes=[1,2,4,8,9,12];this.calendarMode=a.calendarMode;this.ajaxUrl=a.ajaxUrl;this.projectId=a.projectId;this.dateFormat=a.dateFormat?a.dateFormat:"DD, d MM, yy";this.thumbnails=a.thumbnails;this.appointment=a.appointment;this.bookingDaysMinimum=a.bookingDaysMinimum;
this.bookingDaysMaximum=a.bookingDaysMaximum;this.minTime=a.minTime;this.maxTime=a.maxTime;this.returnSameDay=a.returnSameDay;this.returnOptional=a.returnOptional;this.firstDayOfWeek=a.firstDayOfWeek;this.searchResultStartTime=a.searchResultStartTime;this.searchResultEndTime=a.searchResultEndTime;this.timeDisplayMode=a.timeDisplayMode;this.enableMultipleBooking=a.enableMultipleBooking;this.clearLabel=a.clearLabel;this.seasons=a.seasons;this.startCurrentMonthExclusions=[];this.startBookedOutDays=[];
this.startHalfDays={start:[],end:[]};this.startCheckinWeekdayList=[];this.startCheckoutWeekdayList=[];this.startBookedAvailabilityList=[];this._startBookedAvailabilityList=[];this.serverDateFormat="yy-mm-dd";this.endCurrentMonthExclusions=[];this.endBookedOutDays=[];this.endHalfDays={start:[],end:[]};this.endCheckinWeekdayList=[];this.endCheckoutWeekdayList=[];this.endBookedAvailabilityList=[];this._endBookedAvailabilityList=[];this.ajax=new d.ajax({ajaxUrl:this.ajaxUrl,id:this.id,appointment:this.appointment});
this.$form=this.$root.find("form");this.$viewState=this.$root.find('input[name="__viewstate"]');this.$cart=this.$root.find('input[name="calendarista_cart"]');this.$startDate=this.$root.find(".calendarista-start-date");this.$endDate=this.$root.find(".calendarista-end-date");this.$startDateField=this.$root.find('input[name="availableDate"]');this.$endDateField=this.$root.find('input[name="endDate"]');this.$clientStartDateField=this.$root.find('input[name="clientAvailableDate"]');this.$clientEndDateField=
this.$root.find('input[name="clientEndDate"]');this.$timezone=this.$root.find('input[name="timezone"]');this.$dateRangeError=this.$root.find(".calendarista-date-range-error");this.$timeslotsError=this.$root.find(".calendarista-timeslots-error");this.$timeslotsReturnError=this.$root.find(".calendarista-timeslots-return-error");this.$minTimeError=this.$root.find('input[name="minTime"]');this.$maxTimeError=this.$root.find('input[name="maxTime"]');this.$startTimeslotPlaceHolder=this.$root.find(".calendarista-start-timeslot-placeholder");
this.$endTimeslotPlaceHolder=this.$root.find(".calendarista-end-timeslot-placeholder");this.$seatsPlaceholder=this.$root.find(".calendarista-seats-placeholder");this.$bookMorePlaceholder=this.$root.find(".calendarista-bookmore-placeholder");this.$repeatPlaceholder=this.$root.find(".calendarista-repeat-appointment-placeholder");this.$seatsMaximum=this.$root.find('input[name="seatsMaximum"]');this.$dynamicFieldsPlaceholder=this.$root.find(".calendarista-dynamicfield-placeholder");this.$dynamicFieldsCount=
this.$root.find('input[name="dynamicFieldsCount"]');this.$calendarLegend=this.$root.find(".calendarista-calendar-legend"+this.projectId);this.$costSummaryPlaceholder=this.$root.find(".calendarista-cost-summary-placeholder");this.$orderId=this.$root.find('input[name="orderId"]');this.$projectList=this.$root.find('input[name="projectList"]');this.$projectsListbox=this.$root.find('select[name="projects"]');this.$projectId=this.$root.find('input[name="projectId"]');this.$projectsListbox.on("change",d.createDelegate(this,
this.projectsChanged));this.$availabilityField=this.$root.find('input[name="availabilityId"]');this.$oldAvailabilityField=this.$root.find('input[name="oldAvailabilityId"]');this.availabilityId=parseInt(this.$availabilityField.val(),10);this.$availabilityListbox=this.$root.find('select[name="availability"]');this.$availabilityListbox.on("change",d.createDelegate(this,this.availabilityChanged));this.$packageListbox=this.$root.find('select[name="package"]');this.$packageListbox.on("change",d.createDelegate(this,
this.packageChanged));this.$packageDurationPlaceholder=this.$root.find("#calendarista_package_duration_"+this.projectId);this.$wizardSectionBlock=this.$root.find(".calendarista-wizard-section-block");this.$wizardSectionThumbnail=this.$root.find(".calendarista-wizard-section-block-thumb");this.$availabilityPreviewUrlField=this.$root.find('input[name="availabilityPreviewUrl"]');this.$minDate=this.$root.find('input[name="minDate"]');this.$seats=this.$root.find('input[name="seats"]');this.$multiDateSelection=
this.$root.find('input[name="multiDateSelection"]');this.$liveAriaRegion=this.$root.find("#calendarista_liveregion");this.ariaLogDelegate=d.createDelegate(this,this.ariaLog);if([6].indexOf(this.calendarMode)!==-1)if(this.$packageListbox.length===0){this.$startDateField.val(this.$root.find('input[name="__availableDate"]').val());this.$endDateField.val(this.$root.find('input[name="__endDate"]').val());this.seatsRequest()}else this.$packageListbox[0].selectedIndex>0&&this.packageSelected();else this.createCalendars();
if(this.$multiDateSelection.val()){this.$startDateField.val("");this.$endDateField.val("");this.costSummaryRequest(true)}window["calendarista_cost_summary_request"+this.projectId]=d.createDelegate(this,this.mapCostSummaryRequest);this.callbackTimeslotSelected="calendarista_timeslot_selected"+this.availabilityId;this.applyAvailabilityThumbnail(this.availabilityId);this.timezone=c.determine().name();this.$timezone.val(this.timezone)};d.calendar.prototype.requestCurrentMonthCalendar=function(){var a=
new Date,b=a.getMonth()+1;this.calendarRequestByMonth(a.getFullYear(),b,0);if(this.$endDate.length>0)this.requestEndDate=b;this.datepickerReset()};d.calendar.prototype.packageChanged=function(){var a=[],b=parseInt(this.$packageListbox.val(),10);a.push({name:"projectId",value:this.projectId});a.push({name:"availabilityId",value:b});a.push({name:"appointment",value:this.appointment});a.push({name:"projectList",value:this.$projectList.val()});a.push({name:"enableMultipleBooking",value:this.enableMultipleBooking?
1:0});a.push({name:"calendarista_cart",value:this.$cart.val()});this.appointment&&this.$orderId.length>0&&a.push({name:"orderId",value:this.$orderId.val()});a.push({name:"action",value:this.actionWizard});this.ajax.request(this,this.wizardResponse,f.param(a))};d.calendar.prototype.packageSelected=function(){var a=this.$packageListbox.find(":selected"),b=a.attr("data-calendarista-startdate");a=a.attr("data-calendarista-enddate");var e=this;this.availabilityId=parseInt(this.$packageListbox.val(),10);
this.applyAvailabilityThumbnail(this.availabilityId);if(this.availabilityId){this.$availabilityField.val(this.availabilityId);this.$startDateField.val(b);this.$endDateField.val(a);window.setTimeout(function(){e.seatsRequest()},1)}else this.datepickerReset()};d.calendar.prototype.applyAvailabilityThumbnail=function(a){var b,e,g;if(this.thumbnails.length){if(a)for(b=0;b<this.thumbnails.length;b++){e=this.thumbnails[b];if(e.id===a){g=e.url;break}}this.$wizardSectionBlock.addClass("calendarista-wizard-section-no-thumbnail");
this.$wizardSectionBlock.removeClass("calendarista-wizard-section-thumbnail");this.$wizardSectionThumbnail.css("display","none");this.$availabilityPreviewUrlField.val(g);if(g){this.$wizardSectionBlock.addClass("calendarista-wizard-section-thumbnail");this.$wizardSectionBlock.removeClass("calendarista-wizard-section-no-thumbnail");this.$wizardSectionThumbnail.css({display:"block","background-image":'url("'+g+'")'})}}};d.calendar.prototype.projectsChanged=function(){var a=[{name:"projectId",value:parseInt(this.$projectsListbox.val(),
10)},{name:"projectList",value:this.$projectList.val()},{name:"appointment",value:this.appointment},{name:"enableMultipleBooking",value:this.enableMultipleBooking?1:0},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionWizard}];this.appointment&&this.$orderId.length>0&&a.push({name:"orderId",value:this.$orderId.val()});this.ajax.request(this,this.wizardResponse,f.param(a))};d.calendar.prototype.wizardResponse=function(a){this.unload();this.$root.replaceWith(a)};d.calendar.prototype.availabilityChanged=
function(){var a=[],b=parseInt(this.$availabilityListbox.val(),10);a.push({name:"projectId",value:this.projectId});a.push({name:"availabilityId",value:b});a.push({name:"appointment",value:this.appointment});a.push({name:"projectList",value:this.$projectList.val()});a.push({name:"enableMultipleBooking",value:this.enableMultipleBooking?1:0});a.push({name:"calendarista_cart",value:this.$cart.val()});a.push({name:"action",value:this.actionWizard});this.appointment&&this.$orderId.length>0&&a.push({name:"orderId",
value:this.$orderId.val()});this.ajax.request(this,this.wizardResponse,f.param(a))};d.calendar.prototype.createCalendars=function(){var a=this.parseDate(this.$minDate.val()),b=this.appointment===1,e=b?null:a;this.startDateBeforeShowDayDelegate=d.createDelegate(this,this.startDateBeforeShowDay);this.endDateBeforeShowDayDelegate=d.createDelegate(this,this.endDateBeforeShowDay);this.onChangeMonthYearStartDateDelegate=b?null:d.createDelegate(this,this.onChangeMonthYearStartDate);this.onChangeMonthYearEndDateDelegate=
b?null:d.createDelegate(this,this.onChangeMonthYearEndDate);this.onStartDateSelectDelegate=d.createDelegate(this,this.onStartDateSelect);this.onEndDateSelectDelegate=d.createDelegate(this,this.onEndDateSelect);this.onStartDateCloseDelegate=d.createDelegate(this,this.onStartDateClose);this.onEndDateCloseDelegate=d.createDelegate(this,this.onEndDateClose);this.$startDate.datepicker({dateFormat:this.dateFormat,defaultDate:a,minDate:e,beforeShowDay:this.startDateBeforeShowDayDelegate,onChangeMonthYear:this.onChangeMonthYearStartDateDelegate,
onSelect:this.onStartDateSelectDelegate,onClose:this.onStartDateCloseDelegate,showButtonPanel:true,closeText:this.clearLabel,firstDay:this.firstDayOfWeek}).on("keydown",this.ariaLogDelegate);this.$endDate.datepicker({dateFormat:this.dateFormat,defaultDate:a,minDate:e,beforeShowDay:this.endDateBeforeShowDayDelegate,onChangeMonthYear:this.onChangeMonthYearEndDateDelegate,onSelect:this.onEndDateSelectDelegate,onClose:this.onEndDateCloseDelegate,showButtonPanel:true,closeText:this.clearLabel,firstDay:this.firstDayOfWeek}).on("keydown",
this.ariaLogDelegate);this.$datepickerElement=f("#ui-datepicker-div");if(this.availabilityId){if(this.$startDate.length>0){this.$startDate.prop("disabled",true);this._startDateVal=this.$clientStartDateField.val();this.$startDate.val(this.$startDate.attr("data-calendarista-loading"))}if(this.$clientStartDateField.val())a=this.parseDate(this.$clientStartDateField.val());if(this.$endDate.length>0){this.$endDate.prop("disabled",true);this._endDateVal=this.$clientEndDateField.val();this.$endDate.val(this.$endDate.attr("data-calendarista-loading"));
this.requestEndDate=a}this.calendarRequestByMonth(a.getFullYear(),a.getMonth()+1,0)}};d.calendar.prototype.ariaLog=function(a){if(a.keyCode!==13){a=" "+f(".ui-state-hover").html()+" "+f(".ui-datepicker-month").html()+" "+f(".ui-datepicker-year").html();this.$liveAriaRegion.html(a)}};d.calendar.prototype.getCalendarModelByMonth=function(a,b){return[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"appointment",value:this.appointment},{name:"changeMonthYear",
value:a+"-"+this.pad(b)+"-01"},{name:"clientTime",value:this.toTime(new Date)},{name:"timezone",value:this.timezone},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionMonthChange}]};d.calendar.prototype.calendarRequestByMonth=function(a,b,e){a=this.getCalendarModelByMonth(a,b,e);a.push({name:"requestBy",value:e});e===1&&this.$startDate.prop("disabled",true);this.ajax.request(this,this.calendarResponseByMonth,f.param(a))};d.calendar.prototype.calendarResponseByMonth=
function(a){var b=window.JSON.parse(a);this.monthYearResponse(a);if(this.$startDate.length>0&&b.requestBy===0){this.$startDate.val(this._startDateVal);if(this.$clientStartDateField.val()){this.startDateSelected=this.$clientStartDateField.val();this.setStartDate(this.startDateSelected);this.onStartDateSelect(this.startDateSelected);this.$endDate.prop("disabled",false)}this.$startDate.prop("disabled",false)}if(this.$endDate.length>0&&b.requestBy===1){this.$endDate.prop("disabled",false);this.$endDate.val(this._endDateVal);
if(this.$clientEndDateField.val()){this.endDateSelected=this.$clientEndDateField.val();this.setEndDate(this.endDateSelected);this.onEndDateSelect(this.endDateSelected)}else this._endDateVal||this.$endDate.prop("disabled",true);this.$startDate.prop("disabled",false)}if(this.requestEndDate){this.calendarRequestByMonth(this.requestEndDate.getFullYear(),this.requestEndDate.getMonth()+1,1);this.requestEndDate=null}};d.calendar.prototype.createUniqueCalendar=function(){var a="calendarista-calendar-"+this.projectId;
this.$calendarLegend.removeClass("hide");this.$calendarLegend.appendTo(this.$datepickerElement);if(!this.$datepickerElement.hasClass(a)){this.$datepickerElement.removeClass(this.$datepickerElement.prop("data-calendarista-classname")+" calendarista-flat calendarista-borderless");this.$datepickerElement.removeProp("data-calendarista-classname");this.$datepickerElement.prop("data-calendarista-classname",a);this.$datepickerElement.addClass(a+" calendarista-flat calendarista-borderless");this.$datepickerElement.attr("translate",
"no");this.$datepickerElement.addClass("notranslate");this.$datepickerElement.addClass("calendarista-datepicker")}};d.calendar.prototype.resetUniqueCalendar=function(){};d.calendar.prototype.onStartDateClose=function(a){var b,e=window.event||arguments.callee.caller.caller.caller.arguments[0];b=e.currentTarget||e.delegateTarget;e=new Date;var g=this.$minDate.val();if(a)e=this.parseDate(a);else if(g)e=this.parseDate(g);a&&this.$startDate.parsley().reset();this.$startDate.prop("disabled",false);this.resetUniqueCalendar();
this.$dateRangeError.addClass("hide");this.$endDate.length>0&&a&&this.$endDate.prop("disabled",false);if(b&&f(b).hasClass("ui-datepicker-close"))this.datepickerReset();else{if(this.startDateSelected!==a){this.startDateSelected=a;if(this.endDateSelected){b=this.validateDateRange(a,this.endDateSelected,0);if(!b){this.datepickerReset();this.$dateRangeError.removeClass("hide");return}this.setEndDate(null);this.endDateSelected=null;this.$endDateField.val("");this.costSummaryReset();if(this.$endTimeslotPlaceHolder){this.$endTimeListbox=
null;this.$endTimeslotPlaceHolder.empty()}this.adjustStartTime();this.$startDate.datepicker("option","maxDate",null)}else this.timeReset();this.$endDate&&this.$endDate.length>0&&a&&this.$endDate.datepicker("option","minDate",this.parseDate(a));[0].indexOf(this.calendarMode)!==-1&&this.repeatRequest()}this.calendarRequestByMonth(e.getFullYear(),e.getMonth()+1,0)}};d.calendar.prototype.onEndDateClose=function(a){var b,e=window.event||arguments.callee.caller.caller.caller.arguments[0];b=e.currentTarget||
e.delegateTarget;e=new Date;var g=this.$minDate.val();if(a)e=this.parseDate(a);else if(g)e=this.parseDate(g);a&&this.$endDate.parsley().reset();this.$endDate.prop("disabled",false);this.resetUniqueCalendar();this.$dateRangeError.addClass("hide");if(b&&f(b).hasClass("ui-datepicker-close"))this.datepickerReset();else{if(this.endDateSelected!==a&&a){if(this.startDateSelected){b=this.validateDateRange(this.startDateSelected,a,1);if(!b){this.datepickerReset();this.$dateRangeError.removeClass("hide");return}}this.startDateSelected===this.endDateSelected&&this.endDateSelected!==a&&this.timeReset();(this.endDateSelected=a)&&this.$startDate.datepicker("option","maxDate",this.parseDate(a))}this.calendarRequestByMonth(e.getFullYear(),e.getMonth()+1,1)}};d.calendar.prototype.datepickerReset=function(a){var b=this.parseDate(this.$minDate.val());a=typeof a==="undefined"?true:a;this.setStartDate(null);this.setEndDate(null);this.$startDate.datepicker("option","minDate",b);this.$startDate.datepicker("option","maxDate",null);this.$endDate.datepicker("option",
"minDate",new Date);this.$startTimeslotPlaceHolder&&this.$startTimeslotPlaceHolder.empty();this.$endTimeslotPlaceHolder&&this.$endTimeslotPlaceHolder.empty();this.$startDateField.val("");this.$endDateField.val("");this.endDateSelected=this.startDateSelected=null;this.$seatsPlaceholder.html("");this.$bookMorePlaceholder.html("");this.$repeatPlaceholder.html("");this.$dynamicFieldsPlaceholder.html("");a&&this.$costSummaryPlaceholder.html("");this.$startDate.length&&this.$startDate.blur();this.$endDate.length&&
this.$endDate.blur();this._startBookedAvailabilityList.length=0;this._endBookedAvailabilityList.length=0;this._endDateVal=this._startDateVal=null;this.$clientStartDateField.val("");this.$clientEndDateField.val("");this.calendarRequestByMonth(b.getFullYear(),b.getMonth()+1,0);if(this.$endDate.length>0)this.requestEndDate=b};d.calendar.prototype.validateDateRange=function(a,b,e){if(!a||!b)return false;var g=a instanceof Date?a:this.parseDate(a);b=b instanceof Date?b:this.parseDate(b);var h=this.toYMD(g),
i=this.toYMD(b),k=e===0?this.startHalfDays:this.endHalfDays,j=e===0?this.startBookedAvailabilityList.concat([]):this.endBookedAvailabilityList.concat([]),l=e===0?this._startBookedAvailabilityList:this._endBookedAvailabilityList;k=(k?k.start:[]).concat(k?k.end:[]);e=e===0?this.startBookedOutDays:this.endBookedOutDays;var m=0,p=true,q=this.bookingDaysMinimum,r=this.bookingDaysMaximum,o,n,s,t;if(e.length===0&&this.startBookedOutDays.length>0)e=this.startBookedOutDays;if(this.startCurrentMonthExclusions.length>
0)for(n=0;n<this.startCurrentMonthExclusions.length;n++){o=this.startCurrentMonthExclusions[n];e.indexOf(o)===-1&&e.push(o)}if(this.seasons&&this.seasons.length>0)for(n=0;n<this.seasons.length;n++){o=this.seasons[n];s=this.parseDateByFormat(this.serverDateFormat,o.startDate);t=this.parseDateByFormat(this.serverDateFormat,o.endDate);if(g>=s&&g<=t||b>=s&&b<=t){q=parseInt(o.bookingDaysMinimum,10);r=parseInt(o.bookingDaysMaximum,10);break}}if(l.length>0)for(n=0;n<l.length;n++){o=l[n];j.indexOf(o)===-1&&
j.push(o)}if([4].indexOf(this.calendarMode)!==-1&&j.length>0){o=this.dayDiff(g,b);g.setHours(0,0,0,0);b.setHours(0,0,0,0);for(n=0;n<j.length;n++){l=new Date(j[n]);l.setHours(0,0,0,0);if(!(o<=1))if(l>g&&l<b)return false}}if([7,8].indexOf(this.calendarMode)!==-1)return true;if(!a)return false;if([5].indexOf(this.calendarMode)!==-1&&h===i)p=false;for(g=this.parseDate(a);g<=b;g.setDate(g.getDate()+1)){g.getDay();h=this.toYMD(g);++m;if(e.indexOf(h)!==-1||m>1&&h!=i&&k.indexOf(h)!==-1){p=false;break}}if(this.calendarMode===5){if(q)q+=1;if(r)r+=1}if(q&&m<q||r&&m>r)return false;return p};d.calendar.prototype.beforeShowDay=function(a,b,e){var g=a.getDay(),h=this.toYMD(a),i=new Date,k=true,j="",l=this.startDateSelected?this.parseDate(this.startDateSelected):null,m=this.endDateSelected?this.parseDate(this.endDateSelected):null,p=e===0?this.startHalfDays.start:this.endHalfDays.start,q=e===0?this.endHalfDays.end:this.endHalfDays.end,r=e===0?this.startCurrentMonthExclusions:this.endCurrentMonthExclusions,o=e===0?this.startCheckoutWeekdayList:
this.endCheckoutWeekdayList,n=e===0?this.endCheckinWeekdayList:this.endCheckinWeekdayList,s=e===0?this.startBookedAvailabilityList:this.endBookedAvailabilityList;if(g===0)g=7;i.setHours(0,0,0,0);this.createUniqueCalendar();if(e===1&&[3,4,5].indexOf(this.calendarMode)!==-1)if(!this.validateDateRange(this.startDateSelected,a,1))return[false,"calendarista-unavailable"];if(p.indexOf(h)!==-1&&e===0)return[false,"calendarista-unavailable calendarista-halfday-start"];else if(q.indexOf(h)!==-1&&e===1)return[false,
"calendarista-unavailable calendarista-halfday-end"];if(r.indexOf(h)!==-1){k=false;j="calendarista-unavailable"}else if(e===0&&o.indexOf(g)!==-1||e===1&&n.indexOf(g)!==-1){k=false;j="calendarista-selectedday-range"}else{if(p.indexOf(h)!==-1||[3,4,5,7].indexOf(this.calendarMode)!==-1&&l&&a.getTime()==l.getTime()){if(this.calendarMode!==7){j="calendarista-selectedday-range";if(this.calendarMode===5)j+=" calendarista-halfday-start"}if([3,7].indexOf(this.calendarMode)!==-1&&e===1)if(!(e===1&&this.bookingDaysMinimum===1&&this.calendarMode===3))return[false,j]}else if(q.indexOf(h)!==-1||this.calendarMode===5&&m&&a.getTime()==m.getTime())j="calendarista-selectedday-range calendarista-halfday-end";if(h===b)j+=" calendarista-selectedday";else if(a.getTime()==i.getTime())j+=" calendarista-current";if(!k||this.appointment!==1&&a<i){j="calendarista-unavailable";k=false}else j||(j="calendarista-available");if(l&&m&&[3,4,5].indexOf(this.calendarMode)!==-1)if(a.getTime()>=l.getTime()&&a.getTime()<=m.getTime())j+=" calendarista-selectedday-range"}if([4].indexOf(this.calendarMode)!==-1&&s.indexOf(h)!==-1)j+=" calendarista-range-unavailable";return[k,j]};d.calendar.prototype.startDateBeforeShowDay=function(a){var b=this.startDateSelected?this.toYMD(this.parseDate(this.startDateSelected)):null;return this.beforeShowDay(a,b,0)};d.calendar.prototype.endDateBeforeShowDay=function(a){var b=this.endDateSelected?this.toYMD(this.parseDate(this.endDateSelected)):null;this.$startDate.length>0&&!this.$startDate.is(":disabled")&&this.$startDate.prop("disabled",true);b||(b=this.startDateSelected?
this.toYMD(this.parseDate(this.startDateSelected)):null);return this.beforeShowDay(a,b,1)};d.calendar.prototype.onChangeMonthYearStartDate=function(a,b,e){if(!(typeof e.lastVal=="undefined"||this.appointment===1)){a=this.getCalendarModelByMonth(a,b);a.push({name:"requestBy",value:0});this.calendarStateToggle();this.ajax.request(this,this.monthYearStartDateResponse,f.param(a))}};d.calendar.prototype.monthYearStartDateResponse=function(a){this.monthYearResponse(a)};d.calendar.prototype.onChangeMonthYearEndDate=
function(a,b){if(this.appointment!==1){var e=this.getCalendarModelByMonth(a,b);e.push({name:"requestBy",value:1});this.calendarStateToggle();this.ajax.request(this,this.monthYearEndDateResponse,f.param(e))}};d.calendar.prototype.monthYearEndDateResponse=function(a){this.monthYearResponse(a);this.costSummaryRequest(true)};d.calendar.prototype.calendarStateToggle=function(){window.setTimeout(function(){f(".ui-datepicker-calendar a").parent().addClass("ui-datepicker-unselectable ui-state-disabled calendarista-unavailable");
f(".ui-datepicker-prev").addClass("ui-state-disabled").off();f(".ui-datepicker-next").addClass("ui-state-disabled").off()},10)};d.calendar.prototype.monthYearResponse=function(a){a=window.JSON.parse(a);if(a.requestBy==0){this.startDateMonthYearResponse(a);this.$startDate.datepicker("refresh")}else if(a.requestBy==1){this.endDateMonthYearResponse(a);this.$endDate.datepicker("refresh")}};d.calendar.prototype.startDateMonthYearResponse=function(a){var b;this.startCurrentMonthExclusions.length=0;this.startHalfDays.start.length=
0;this.startHalfDays.end.length=0;this.startCheckinWeekdayList.length=0;this.startCheckoutWeekdayList.length=0;this.startBookedAvailabilityList.length=0;this.startBookedOutDays.length=0;this.endBookedOutDays.length=0;if(this.appointment!==1){if(a.exclusions)this.startCurrentMonthExclusions=a.exclusions;if(a.bookedOutDays)this.startBookedOutDays=a.bookedOutDays;if(a.halfDays){this.startHalfDays.start=a.halfDays.start;this.startHalfDays.end=a.halfDays.end}if(a.checkinWeekdayList)this.startCheckinWeekdayList=
a.checkinWeekdayList;if(a.checkoutWeekdayList)this.startCheckoutWeekdayList=a.checkoutWeekdayList;if(a.bookedAvailabilityList){this.startBookedAvailabilityList=a.bookedAvailabilityList;for(a=0;a<this.startBookedAvailabilityList.length;a++){b=this.startBookedAvailabilityList[a];this._startBookedAvailabilityList.indexOf(b)===-1&&this._startBookedAvailabilityList.push(b)}}}};d.calendar.prototype.endDateMonthYearResponse=function(a){var b,e;this.endCurrentMonthExclusions.length=0;this.endHalfDays.start.length=
0;this.endHalfDays.end.length=0;this.endCheckinWeekdayList.length=0;this.endCheckoutWeekdayList.length=0;this.endBookedAvailabilityList.length=0;if(this.appointment!==1){if(a.exclusions)this.endCurrentMonthExclusions=a.exclusions;if(a.bookedOutDays)for(b=0;b<a.bookedOutDays.length;b++){e=a.bookedOutDays[b];this.endBookedOutDays.indexOf(e)===-1&&this.endBookedOutDays.push(e)}if(a.halfDays){this.endHalfDays.start=a.halfDays.start;this.endHalfDays.end=a.halfDays.end}if(a.checkinWeekdayList)this.endCheckinWeekdayList=
a.checkinWeekdayList;if(a.checkoutWeekdayList)this.endCheckoutWeekdayList=a.checkoutWeekdayList;if(a.bookedAvailabilityList){this.endBookedAvailabilityList=a.bookedAvailabilityList;for(b=0;b<this.endBookedAvailabilityList.length;b++){e=this.endBookedAvailabilityList[b];this._endBookedAvailabilityList.indexOf(e)===-1&&this._endBookedAvailabilityList.push(e)}}}};d.calendar.prototype.onStartDateSelect=function(a){var b=this.toTime(new Date),e=this.toYMD(this.parseDate(a)),g=[0,1,2,9,11,12].indexOf(this.calendarMode)!==-1?e:this.$endDateField?this.$endDateField.val():e,h=this.$startTimeListbox?this.$startTimeListbox.val():-1,i=this.$endTimeListbox?this.$endTimeListbox.val():-1,k=this.$root.find("a.calendarista-timeslot-deals .calendarista-timeslot-deals-selected time");if(k.length>0)h=parseInt(k.attr("data-calendarista-value"),10);h=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"selectedDate",value:e},{name:"selectedStartTime",value:h},{name:"sameDay",value:false},
{name:"clientTime",value:b},{name:"searchResultStartTime",value:this.searchResultStartTime},{name:"timezone",value:this.timezone},{name:"calendarMode",value:this.calendarMode},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionStartDaySelected}];i=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"selectedDate",value:e},{name:"selectedEndTime",
value:i},{name:"sameDay",value:g==e},{name:"searchResultEndTime",value:this.searchResultEndTime},{name:"clientTime",value:b},{name:"timezone",value:this.timezone},{name:"calendarMode",value:this.calendarMode},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionEndDaySelected}];this.$startDate.parsley().reset();this._startDateVal=a;this.$clientStartDateField.val("");[11].indexOf(this.calendarMode)!==-1&&this.insertMultiDate(e);g==e&&this.searchResultEndTime&&h.push({name:"searchResultEndTime",value:this.searchResultEndTime});if(!(this.endDateSelected&&!this.validateDateRange(a,this.endDateSelected,0))){this.currentTime=b;this.$startDateField.val(e);this.$endDate.length===0&&this.$endDateField.val(e);if(this.timeslotCalendarModes.indexOf(this.calendarMode)!==-1){this.ajax.request(this,this.startDayResponse,f.param(h));if(this.calendarMode===2){this.$endDateField.val(e);this.ajax.request(this,
this.endDayResponse,f.param(i))}}if([0,11].indexOf(this.calendarMode)!==-1||[7].indexOf(this.calendarMode)!==-1&&this.returnOptional)this.seatsRequest()}};d.calendar.prototype.startDayResponse=function(a){var b;this.$startTimeListbox&&this.$startTimeListbox.off();this.$startTimeDeals&&this.$startTimeDeals.off();this.$startTimeReset&&this.$startTimeReset.off();this.$startTimeslotPlaceHolder.removeClass("hide");this.$startTimeslotPlaceHolder.replaceWith(a);this.$startTimeslotPlaceHolder=this.$root.find(".calendarista-start-timeslot-placeholder");
if(this.timeDisplayMode===1&&[1,9,12].indexOf(this.calendarMode)!==-1){this.$startTimeDeals=this.$root.find("a.calendarista-timeslot-deals");b=this.$root.find("a.calendarista-timeslot-deals .calendarista-timeslot-deals-selected time");this.onStartTimeDealClickedDelegate=d.createDelegate(this,this.onStartTimeDealClicked);this.$startTimeDeals.on("click",this.onStartTimeDealClickedDelegate);a=this.$root.find('input[name="startTime"]');if(a.length>0){a.val("");a.parsley().reset()}}this.$startTimeListbox=
this.$root.find('select[name="startTime"]');if(this.$startTimeListbox.length===0)this.$startTimeListbox=this.$root.find('select[name="startTime[]"]');this.$startTimeReset=this.$root.find(".calendarista-starttime-reset");this.$startTimeListbox.on("change",d.createDelegate(this,this.onStartTimeSelected));this.$startTimeReset.on("click",d.createDelegate(this,this.timeResetClick));if(!this.validateTimeslots(this.$startTimeListbox,0)){this.setStartDate(null);this.$startDateField.val("")}this.$startTimeListbox.is("[multiple]")&&
this.disableOutOfStockListItems(this.$startTimeListbox);[8].indexOf(this.calendarMode)!==-1&&this.returnSameDay&&this.requestEndTimeslots();if([0,2,4,8,11].indexOf(this.calendarMode)!==-1)this.costSummaryRequest(true);else if([1,12].indexOf(this.calendarMode)!==-1)if(this.$startTimeListbox.length>0&&this.$startTimeListbox[0].selectedIndex>0)this.seatsRequest({name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)});else b&&b.length>0?this.seatsRequest({name:"startTime",
value:parseInt(b.attr("data-calendarista-value"),10)}):this.seatsResponse("")};d.calendar.prototype.seatsRequest=function(a){var b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"startDate",value:this.$startDateField.val()},{name:"endDate",value:this.$endDateField.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionSeats}];
if(isNaN(this.projectId)||isNaN(this.availabilityId))return false;if(a)b=b.concat(a);this.$availabilities&&this.$availabilities.length>0&&this.$availabilities.prop("checked",false);this.ajax.request(this,this.seatsResponse,f.param(b));(function(e,g){window.setTimeout(function(){g.bookMoreRequest(e)},10)})(a,this)};d.calendar.prototype.seatsResponse=function(a){this.$seats&&this.$seats.length>0&&this.$seats.off();this.$seatsPlaceholder.html(a);this.$seats=this.$root.find('select[name="seats"]');this.$seatsMaximum=
this.$root.find('input[name="seatsMaximum"]');if(this.$seats.length===0)this.$seats=this.$root.find('input[name="seats"]');this.$seats.on("change",d.createDelegate(this,this.seatSelectionChanged));[0,1,2,6,9,11,12].indexOf(this.calendarMode)!==-1&&this.costSummaryRequest(true)};d.calendar.prototype.dynamicFieldsRequest=function(){var a=this.$seats?this.$seats.val():0,b=this.$seatsMaximum.length>0?parseInt(this.$seatsMaximum.val(),10):0;a=[{name:"projectId",value:this.projectId},{name:"availabilityId",
value:this.availabilityId},{name:"seats",value:a},{name:"seatsMax",value:b},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionDynamicFields}];if((b=this.$dynamicFieldsCount.val())&&parseInt(b,10)>0){this.ajax.request(this,this.dynamicFieldsResponse,f.param(a));return true}return false};d.calendar.prototype.dynamicFieldsResponse=function(a){this.$dynamicFields&&this.$dynamicFields.off();
this.$dynamicFieldsPlaceholder.html(a);this.$dynamicFields=this.$root.find(".calendarista-dynamicfield");this.$dynamicFields.on("change",d.createDelegate(this,this.dynamicFieldChange));this.costSummaryRequest()};d.calendar.prototype.dynamicFieldChange=function(a){var b=f(a.currentTarget);a=b.prop("id");b=parseInt(b.attr("data-calendarista-limit"),10);b=this.$seatsMaximum.length>0&&b?parseInt(this.$seatsMaximum.val(),10):0;var e=0,g,h,i,k,j,l;if(this.$seats.length>0&&this.$seats[0].type==="select-one")b=
parseInt(this.$seats.val(),10);if(this.$dynamicFields.length>1)for(h=0;h<this.$dynamicFields.length;h++){i=f(this.$dynamicFields[h]);if(l=parseInt(i.val(),10))e+=l}if(b)for(h=0;h<this.$dynamicFields.length;h++){i=f(this.$dynamicFields[h]);if(i.prop("id")!=a){g=i.val()?parseInt(i.val(),10):0;k=i.find("option");for(i=0;i<k.length;i++){j=f(k[i]);l=j.val()?parseInt(j.val(),10):0;if(l>g&&b-e<l)this.disableOption(j);else if(j.is(":disabled")){j.prop("disabled",false);j.html(j.attr("data-calendarista-value"))}}}}this.costSummaryRequest()};
d.calendar.prototype.bookMoreRequest=function(a){var b;if(this.$bookMorePlaceholder.length!==0){(b=this.$seats?this.$seats.val():1)||(b=1);b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"seats",value:b},{name:"startDate",value:this.$startDateField.val()},{name:"endDate",value:this.$endDateField.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",
value:this.actionBookMore}];if(isNaN(this.projectId)||isNaN(this.availabilityId))return false;if(a)b=b.concat(a);this.ajax.request(this,this.bookMoreResponse,f.param(b))}};d.calendar.prototype.bookMoreResponse=function(a){this.$availabilities&&this.$availabilities.length>0&&this.$availabilities.off();this.$bookMorePlaceholder.html(a);this.$availabilities=this.$root.find('input[name="availabilities[]"]');this.$availabilities.on("change",d.createDelegate(this,this.bookMoreSelectionChanged));this.costSummaryRequest(true)};
d.calendar.prototype.bookMoreSelectionChanged=function(){this.costSummaryRequest(true)};d.calendar.prototype.repeatRequest=function(a){var b;if([0,1,2,9].indexOf(this.calendarMode)!==-1)if(this.$repeatPlaceholder.length!==0){b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"startDate",value:this.$startDateField.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},
{name:"action",value:this.actionRepeat}];if(isNaN(this.projectId)||isNaN(this.availabilityId))return false;if(a)b=b.concat(a);this.ajax.request(this,this.repeatResponse,f.param(b))}};d.calendar.prototype.repeatResponse=function(a){this.$repeatPlaceholder.html(a)};d.calendar.prototype.getCostSummaryModel=function(){var a=f("#"+this.id).find('input[name="postbackStep"]'),b=this.$startTimeListbox?this.$startTimeListbox.val():"",e=this.$startDateField?this.$startDateField.val():"",g=this.$endTimeListbox?
this.$endTimeListbox.val():"",h=this.$endDateField?this.$endDateField.val():"",i=this.$seats?this.$seats.val():"",k=this.$multiDateSelection.val(),j;j=this.$root.find("a.calendarista-timeslot-deals .calendarista-timeslot-deals-selected time");var l,m=[];if(j.length>0)b=parseInt(j.attr("data-calendarista-value"),10);switch(this.calendarMode){case 1:case 8:if(!b){this.costSummaryReset();return false}break;case 2:case 4:if(!b||!g){this.costSummaryReset();return false}break;case 3:case 5:if(!e||!h){this.costSummaryReset();
return false}}if(b instanceof Array){if(b.length>1){g=b[b.length-1];h=e}b=b[0]}if(this.$availabilities&&this.$availabilities.length>0)for(j=0;j<this.$availabilities.length;j++){l=f(this.$availabilities[j]);l.is(":checked")&&m.push(parseInt(l.val(),10))}a=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"appointment",value:this.appointment},{name:"availableDate",value:e},{name:"multiDateSelection",value:k},{name:"startTime",value:b},{name:"endDate",value:h},
{name:"endTime",value:g},{name:"seats",value:i},{name:"calendarMode",value:this.calendarMode},{name:"timezone",value:this.timezone},{name:"availabilities",value:m.join(",")},{name:"postbackStep",value:a.val()},{name:"__viewstate",value:this.$viewState.val()},{name:"action",value:this.actionCostSummary}];if(this.$dynamicFields&&this.$dynamicFields.length>0)for(j=0;j<this.$dynamicFields.length;j++)a.push({name:this.$dynamicFields[j].name,value:this.$dynamicFields[j].value});return a};d.calendar.prototype.mapCostSummaryRequest=
function(a){var b=this.getCostSummaryModel();if(b){a=b.concat(a);this.$costSummaryPlaceholder=f("#"+this.id).find(".calendarista-cost-summary-placeholder");(function(e,g){window.setTimeout(function(){g.ajax.request(g,g.costSummaryResponse,f.param(e))},10)})(a,this)}};d.calendar.prototype.seatSelectionChanged=function(){this.costSummaryRequest(true)};d.calendar.prototype.costSummaryRequest=function(a){var b=this.getCostSummaryModel(),e=this.$root.find(".calendarista-multi-date-btn");if(!b)return false;
if(a===true&&this.dynamicFieldsRequest())return false;e.off();(function(g,h){window.setTimeout(function(){h.ajax.request(h,h.costSummaryResponse,f.param(g))},10)})(b,this)};d.calendar.prototype.costSummaryResponse=function(a){this.$costSummaryPlaceholder.html(a);a=this.$costSummaryPlaceholder.find(".calendarista-multi-date-btn");if(a.length>0){this.multiDateButtonClickDelegate=d.createDelegate(this,this.removeDateClickHandler);a.on("click",this.multiDateButtonClickDelegate)}};d.calendar.prototype.costSummaryReset=
function(){this.$costSummaryPlaceholder.html("")};d.calendar.prototype.validateTimeslots=function(a,b){var e=a.find("option:not([disabled])"),g=this.$startTimeListbox&&this.$startTimeListbox.is("[multiple]"),h=this.$startTimeDeals&&this.$startTimeDeals.length>0,i=b&&this.returnSameDay?this.$timeslotsReturnError:this.$timeslotsError;if(a.length===0&&!h){i.removeClass("hide");return false}if(h){i.addClass("hide");return true}this.adjustStartTime();this.adjustEndTime();if(a.prop("type")==="hidden"||
!g&&e.length===1){i.removeClass("hide");return false}i.addClass("hide");return true};d.calendar.prototype.validateTimeRange=function(){var a=this.$startTimeListbox?this.$startTimeListbox.find(":selected"):null,b=this.$endTimeListbox?this.$endTimeListbox.find(":selected"):null,e,g,h,i;if(!this.minTime&&!this.maxTime)return true;if(!a||!b)return true;e=parseInt(a.attr("data-calendarista-hour"),10);a=parseInt(a.attr("data-calendarista-minute"),10);g=parseInt(b.attr("data-calendarista-hour"),10);b=parseInt(b.attr("data-calendarista-minute"),
10);if(!isNaN(e)&&!isNaN(a)){h=new Date;h.setHours(e,a,0)}if(!isNaN(g)&&!isNaN(b)){i=new Date;i.setHours(g,b,0)}if(h&&i){i<=h&&i.setDate(i.getDate()+1);e=i-h;e=Math.floor(e/6E4);if(this.minTime)if(e<this.minTime){this.$minTimeError.val("");this.$minTimeError.parsley().validate();return false}else{this.$minTimeError.val("-1");this.$minTimeError.parsley().reset()}if(this.maxTime)if(e>this.maxTime){this.$maxTimeError.val("");this.$maxTimeError.parsley().validate();return false}else{this.$maxTimeError.val("-1");
this.$maxTimeError.parsley().reset()}}else{this.$minTimeError.val("-1");this.$minTimeError.parsley().reset();this.$maxTimeError.val("-1");this.$maxTimeError.parsley().reset()}return true};d.calendar.prototype.disableOutOfStockListItems=function(a){var b,e;if(a.is("[multiple]")){b=a.find("option");for(a=0;a<b.length;a++){e=f(b[a]);e[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(e)}}};d.calendar.prototype.onStartTimeSelected=function(){var a,b,e,g,h=0,i,k,j=false,l=[];a=this.$endTimeListbox&&
this.$endTimeListbox.find("option:selected");this.adjustStartTime();this.adjustEndTime();if([1,2,9,12].indexOf(this.calendarMode)!==-1){if(this.$startTimeListbox.is("[multiple]")){i=parseInt(this.$startTimeListbox.attr("data-calendarista-max-timeslots"),10);a=this.$startTimeListbox.find("option");e=this.$startTimeListbox.find("option:selected").map(function(){return this.index}).get();for(g=0;g<a.length;g++){b=f(a[g]);b.prop("selected",false);(k=b[0].hasAttribute("data-calendarista-outofstock"))&&
this.disableOption(b);if(g>=e[0]&&g<=e[e.length-1])if(j||i&&h>=i||k)j||(j=k);else{b.prop("selected",true);l.push(b[0]);++h}}window[this.callbackTimeslotSelected]&&window[this.callbackTimeslotSelected](l)}if([1,9,12].indexOf(this.calendarMode)!==-1){h=parseInt(this.$startTimeListbox.find("option:selected").val(),10);this.insertMultiDateTime(h);this.seatsRequest([{name:"startTime",value:h}])}else this.costSummaryRequest(true);[1,9].indexOf(this.calendarMode)!==-1&&this.repeatRequest()}else if([4,8].indexOf(this.calendarMode)!==-1)this.$bookMorePlaceholder.length>0&&a&&a.length>0?this.bookMoreRequest([{name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)},{name:"endTime",value:parseInt(a.val(),10)}]):this.costSummaryRequest(true)};d.calendar.prototype.onStartTimeDealClicked=function(a){a.preventDefault();var b=f(a.currentTarget).find("time");b=parseInt(b.attr("data-calendarista-value"),10);var e=this.$root.find('input[name="startTime"]');e.val(b);this.$startTimeDeals.find(".calendarista-timeslot-deals-tile").removeClass("calendarista-timeslot-deals-selected");
f(a.currentTarget).find(".calendarista-timeslot-deals-tile").addClass("calendarista-timeslot-deals-selected");e.parsley().reset();this.insertMultiDateTime(b);window[this.callbackTimeslotSelected]&&window[this.callbackTimeslotSelected]([e[0]]);this.seatsRequest([{name:"startTime",value:b}])};d.calendar.prototype.insertMultiDate=function(a){var b=this.$multiDateSelection.val(),e=this.bookingDaysMaximum;if([11].indexOf(this.calendarMode)!==-1&&a){b=b?b.split(";"):[];if((!e||b.length<e)&&b.indexOf(a)===-1)b.push(a);b=b.join(";");this.$multiDateSelection.val(b);this.datepickerReset(false)}return this.$multiDateSelection.val()};d.calendar.prototype.insertMultiDateTime=function(a){var b=this.$multiDateSelection.val(),e=this.$startDateField.val(),g=e+":"+a,h=this.bookingDaysMaximum;if([12].indexOf(this.calendarMode)!==-1&&a){b=b?b.split(";"):[];if(!h||b.length<h){a=this.inArray(b,e);if(a!==-1&&b.indexOf(g)===-1)b.splice(a,1,g);else b.indexOf(g)===-1&&b.push(g);b=b.join(";");this.$multiDateSelection.val(b);
this.datepickerReset(false)}}return this.$multiDateSelection.val()};d.calendar.prototype.inArray=function(a,b){var e;if(a)for(e=0;e<a.length;e++)if(a[e].indexOf(b)!==-1)return e;return-1};d.calendar.prototype.removeDateClickHandler=function(a){var b=f(a.currentTarget).attr("data-calendarista-value");if(a=this.$multiDateSelection.val()){a=a.split(";");b=a.indexOf(b);b!==-1&&a.splice(b,1);this.$multiDateSelection.val(a.join(";"));this.datepickerReset(false);this.costSummaryRequest(true)}};d.calendar.prototype.adjustEndTime=
function(){if(!(this.startDateSelected!==this.endDateSelected&&this.calendarMode!==2)){var a,b=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox[0].selectedIndex:0,e=this.$endTimeListbox&&this.$endTimeListbox.length>0?this.$endTimeListbox.find("option"):null,g;if(e){e.prop("disabled",false);for(a=0;a<e.length;a++){g=f(e[a]);a>0&&a<b?this.disableOption(g):g.html(g.attr("data-calendarista-time"))}}this.$endTimeListbox&&this.disableTimeResetButtons(this.$endTimeListbox);
this.filterOutOfStockSlots()}};d.calendar.prototype.filterOutOfStockSlots=function(){var a,b,e=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox.find("option"):null,g=this.$endTimeListbox&&this.$endTimeListbox.length>0?this.$endTimeListbox.find("option"):null,h=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox[0].selectedIndex:0,i=e?e.filter("[data-calendarista-outofstock]"):null,k=-1,j=-1,l=this.startDateSelected==this.endDateSelected||!this.endDateSelected,
m=true,p;if([1,9].indexOf(this.calendarMode)!==-1&&!this.$startTimeListbox.is("[multiple]"))m=false;if(e){if(m&&!l&&[2,4].indexOf(this.calendarMode)!==-1&&i&&i.length>0)k=l?i[0].index:i[i.length-1].index;for(a=0;a<e.length;a++){b=f(e[a]);if(a>0&&k!==-1&&a<k)this.disableOption(b);else b[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(b)}}if(g){if(m){if(!l||i&&i.length===0)i=g?g.filter("[data-calendarista-outofstock]"):null;if(i&&i.length>0)j=l?i[i.length-1].index:i[0].index}if([8].indexOf(this.calendarMode)!==-1)for(a=0;a<g.length;a++){b=f(g[a]);b[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(b)}for(a=0;a<g.length;a++){b=f(g[a]);if(j!==-1)if(h<=j&&a>=j)this.disableOption(b);else!l&&i.length>0&&a>=i[i.length-1].index&&this.disableOption(b)}if(l&&j!==-1&&h<j)for(a=h;a<j;a++){b=f(g[a]);if(!p&&b[0].hasAttribute("data-calendarista-outofstock")){p=true;if(h!==0)continue}p&&this.disableOption(b)}}};d.calendar.prototype.disableOption=function(a){if(!a.is(":disabled")){a.prop("disabled",true);
a.prop("selected",false);a.html(a.html().replace(/\d/g,function(b){return b+"\u0336"}))}};d.calendar.prototype.onEndDateSelect=function(a){var b=this.toTime(new Date),e=this.toYMD(this.parseDate(a)),g=this.$startDateField?this.$startDateField.val():"",h=this.$startTimeListbox?this.$startTimeListbox.val():-1,i=this.$endTimeListbox?this.$endTimeListbox.val():-1;b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"selectedDate",value:g},{name:"selectedStartTime",
value:h},{name:"sameDay",value:false},{name:"clientTime",value:b},{name:"searchResultStartTime",value:this.searchResultStartTime},{name:"timezone",value:this.timezone},{name:"calendarMode",value:this.calendarMode},{name:"__viewstate",value:this.$viewState.val()},{name:"appointment",value:this.appointment},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionStartDaySelected}];i=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},
{name:"appointment",value:this.appointment},{name:"selectedDate",value:e},{name:"selectedEndTime",value:i},{name:"sameDay",value:g==e},{name:"searchResultEndTime",value:this.searchResultEndTime},{name:"clientTime",value:this.currentTime},{name:"calendarMode",value:this.calendarMode},{name:"timezone",value:this.timezone},{name:"__viewstate",value:this.$viewState.val()},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionEndDaySelected}];this.$endDate.parsley().reset();
this._endDateVal=a;this.$clientEndDateField.val("");if(this.validateDateRange(this.startDateSelected,a,1)){this.$endDateField.val(e);if([4,8].indexOf(this.calendarMode)!==-1){(function(k,j,l,m){if(j==l)k[4].value=true;window.setTimeout(function(){m.ajax.request(m,m.startDayResponse,f.param(k))},10)})(b,g,e,this);(function(k,j){window.setTimeout(function(){j.ajax.request(j,j.endDayResponse,f.param(k))},10)})(i,this)}else if([3,7,5].indexOf(this.calendarMode)!==-1)this.$bookMorePlaceholder.length>0?
this.bookMoreRequest():this.costSummaryRequest(true)}else this.datepickerReset()};d.calendar.prototype.requestEndTimeslots=function(){this.toTime(new Date);var a=this.$startDateField?this.$startDateField.val():"",b=this.$endTimeListbox?this.$endTimeListbox.val():-1;b=[{name:"projectId",value:this.projectId},{name:"availabilityId",value:this.availabilityId},{name:"appointment",value:this.appointment},{name:"selectedDate",value:a},{name:"selectedEndTime",value:b},{name:"sameDay",value:true},{name:"searchResultEndTime",
value:this.searchResultEndTime},{name:"clientTime",value:this.currentTime},{name:"calendarMode",value:this.calendarMode},{name:"timezone",value:this.timezone},{name:"__viewstate",value:this.$viewState.val()},{name:"calendarista_cart",value:this.$cart.val()},{name:"action",value:this.actionEndDaySelected}];this._endDateVal=a;this.$clientEndDateField.val("");this.$endDateField.val(a);(function(e,g){window.setTimeout(function(){g.ajax.request(g,g.endDayResponse,f.param(e))},10)})(b,this)};d.calendar.prototype.endDayResponse=
function(a){this.$endTimeListbox&&this.$endTimeListbox.off();this.$endTimeReset&&this.$endTimeReset.off();this.$endTimeslotPlaceHolder.removeClass("hide");this.$endTimeslotPlaceHolder.replaceWith(a);this.$endTimeslotPlaceHolder=this.$root.find(".calendarista-end-timeslot-placeholder");this.$endTimeListbox=this.$root.find('select[name="endTime"]');if(this.$endTimeListbox.length===0)this.$endTimeListbox=this.$root.find('select[name="endTime[]"]');this.$endTimeReset=this.$root.find(".calendarista-endtime-reset");
this.$endTimeListbox.on("change",d.createDelegate(this,this.onEndTimeSelected));this.$endTimeReset.on("click",d.createDelegate(this,this.timeResetClick));if(!this.validateTimeslots(this.$endTimeListbox,1)){this.setEndDate(null);this.$endDateField.val("");if(this.returnSameDay&&!this.returnOptional){this.setStartDate(null);this.$startDateField.val("")}}if([2,4,8].indexOf(this.calendarMode)!==-1)this.$endTimeListbox.length>0&&this.$endTimeListbox[0].selectedIndex>0?this.seatsRequest({name:"endTime",
value:parseInt(this.$endTimeListbox.find("option:selected").val(),10)}):this.costSummaryRequest(true)};d.calendar.prototype.onEndTimeSelected=function(){this.adjustStartTime();this.validateTimeRange();window[this.callbackTimeslotSelected]&&window[this.callbackTimeslotSelected]([this.$startTimeListbox.find("option:selected")[0],this.$endTimeListbox.find("option:selected")[0]]);if([2].indexOf(this.calendarMode)!==-1)this.seatsRequest([{name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),
10)},{name:"endTime",value:parseInt(this.$endTimeListbox.find("option:selected").val(),10)}]);else[4,8].indexOf(this.calendarMode)!==-1&&this.$bookMorePlaceholder.length>0?this.bookMoreRequest([{name:"startTime",value:parseInt(this.$startTimeListbox.find("option:selected").val(),10)},{name:"endTime",value:parseInt(this.$endTimeListbox.find("option:selected").val(),10)}]):this.costSummaryRequest(true)};d.calendar.prototype.adjustStartTime=function(){if(!(this.startDateSelected!==this.endDateSelected&&
this.calendarMode!==2)){var a,b=this.$endTimeListbox&&this.$endTimeListbox.length>0?this.$endTimeListbox[0].selectedIndex:0,e=this.$startTimeListbox&&this.$startTimeListbox.length>0?this.$startTimeListbox.find("option"):null,g;if(e){e.prop("disabled",false);for(a=0;a<e.length;a++){g=f(e[a]);a>b&&b!==0?this.disableOption(g):g.html(g.attr("data-calendarista-time"))}}this.$startTimeListbox&&this.$startTimeListbox.length>0&&this.disableTimeResetButtons(this.$startTimeListbox)}this.filterOutOfStockSlots()};
d.calendar.prototype.timeResetClick=function(a){a.preventDefault();this.timeReset()};d.calendar.prototype.timeReset=function(){var a=this.$startTimeListbox?this.$startTimeListbox.find("option"):null,b=this.$endTimeListbox?this.$endTimeListbox.find("option"):null;if(a){a.prop("disabled",false);if(this.$startTimeListbox.length>0)this.$startTimeListbox[0].selectedIndex=0;this.resetTimeslot(a);if(b){b.prop("disabled",false);this.resetTimeslot(b);if(this.$endTimeListbox.length>0)this.$endTimeListbox[0].selectedIndex=
0}this.$startTimeReset.addClass("calendarista-not-active");this.$startTimeReset.prop("disabled",true);if(this.$endTimeReset){this.$endTimeReset.addClass("calendarista-not-active");this.$endTimeReset.prop("disabled",true)}this.filterOutOfStockSlots()}};d.calendar.prototype.resetTimeslot=function(a){if(a){var b,e;for(b=1;b<a.length;b++){e=f(a[b]);e.html(e.attr("data-calendarista-time"));e[0].hasAttribute("data-calendarista-outofstock")&&this.disableOption(e)}}};d.calendar.prototype.disableTimeResetButtons=
function(a){if(a.find("option[disabled]").length>0){if(this.$startTimeReset){this.$startTimeReset.removeClass("calendarista-not-active");this.$startTimeReset.prop("disabled",false)}if(this.$endTimeReset){this.$endTimeReset.removeClass("calendarista-not-active");this.$endTimeReset.prop("disabled",false)}}else{if(this.$startTimeReset){this.$startTimeReset.addClass("calendarista-not-active");this.$startTimeReset.prop("disabled",true)}if(this.$endTimeReset){this.$endTimeReset.addClass("calendarista-not-active");
this.$endTimeReset.prop("disabled",true)}}};d.calendar.prototype.dayDiff=function(a,b){var e;if(a instanceof Date&&!isNaN(a.valueOf())&&b instanceof Date&&!isNaN(b.valueOf())){e=Math.abs(b.getTime()-a.getTime());return Math.ceil(e/864E5)}return 0};d.calendar.prototype.toYMD=function(a){var b,e;if(a instanceof Date){b=a.getFullYear().toString();e=(a.getMonth()+1).toString();a=a.getDate().toString();return b+"-"+this.pad(e)+"-"+this.pad(a)}return""};d.calendar.prototype.toTime=function(a){var b=a.getHours();
a=this.pad(a.getMinutes());var e=b>=12?"pm":"am";b%=12;b=b?b:12;return b+":"+a+" "+e};d.calendar.prototype.parseDate=function(a){return f.datepicker.parseDate(this.dateFormat,a)};d.calendar.prototype.parseDateByFormat=function(a,b){return f.datepicker.parseDate(a,b)};d.calendar.prototype.pad=function(a){return("0"+a).slice(-2)};d.calendar.prototype.setStartDate=function(a){var b=null;if(a)b=this.parseDate(a);this.$startDate.length>0&&f.datepicker._setDate(f.datepicker._getInst(this.$startDate[0]),
b,true)};d.calendar.prototype.setEndDate=function(a){var b=null;if(a)b=this.parseDate(a);this.$endDate.length>0&&f.datepicker._setDate(f.datepicker._getInst(this.$endDate[0]),b,true)};d.calendar.prototype.unload=function(){this.$startTimeListbox&&this.$startTimeListbox.off();this.$endTimeListbox&&this.$endTimeListbox.off();this.$startTimeReset&&this.$startTimeReset.off();this.$endTimeReset&&this.$endTimeReset.off();this.$startDate.data("datepicker")!=null&&this.$startDate.datepicker("destroy");this.$endDate.data("datepicker")!=null&&this.$endDate.datepicker("destroy");this.$projectsListbox.length&&this.$projectsListbox.off();this.$availabilityListbox.length&&this.$availabilityListbox.off();if(this._startBookedAvailabilityList.length)this._startBookedAvailabilityList.length=0;if(this._endBookedAvailabilityList.length)this._endBookedAvailabilityList.length=0;this.$packageListbox.length&&this.$packageListbox.off();this.$seats&&this.$seats.off();this.$dynamicFields&&this.$dynamicFields.length&&this.$dynamicFields.off();this.ajax&&
this.ajax.destroy();if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,window.Calendarista,window.jstz);
(function(f,d){d.optionals=function(c){this.init(c);this.unloadDelegate=d.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};d.optionals.prototype.init=function(c){this.id=c.id;this.projectId=c.projectId;this.$root=f("#"+this.id);this.actionCostSummary="calendarista_cost_summary";this.ajaxUrl=c.ajaxUrl;this.ajax=new d.ajax({ajaxUrl:this.ajaxUrl,id:this.id});this.$costSummaryPlaceholder=this.$root.find(".calendarista-cost-summary-placeholder");this.$postbackStep=this.$root.find('input[name="postbackStep"]');
this.$viewstate=this.$root.find('input[name="__viewstate"]');this.$optionals=this.$root.find(".calendarista-optional");this.$optionals.on("change",d.createDelegate(this,this.optionalChanged));this.costSummary()};d.optionals.prototype.optionalChanged=function(){this.costSummary()};d.optionals.prototype.costSummary=function(){var c=[{name:"optionals",value:this.$root.find(".calendarista-optional:checked, .calendarista-optional option:selected").map(function(){return this.value}).get().join(",")},{name:"action",
value:this.actionCostSummary},{name:"projectId",value:this.projectId},{name:"postbackStep",value:this.$postbackStep.val()},{name:"__viewstate",value:this.$viewstate.val()}];this.ajax.request(this,this.costSummaryResponse,f.param(c))};d.optionals.prototype.costSummaryResponse=function(c){this.$costSummaryPlaceholder.html(c)};d.optionals.prototype.unload=function(){this.$optionals.length&&this.$optionals.off();if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,
window.Calendarista);
(function(f,d){d.repeatAppointment=function(c){this.init(c);this.unloadDelegate=d.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};d.repeatAppointment.prototype.init=function(c){var a=this;this.id=c.id;this.everyDaySummary=c.everyDaySummary;this.everyWeekOn=c.everyWeekOn;this.everyMonth=c.everyMonth;this.everyYear=c.everyYear;this.everyDayOfTheWeek=c.everyDayOfTheWeek;this.occurrenceTimes=c.occurrenceTimes;this.until=c.until;this.justOnce=c.justOnce;this.su=c.su;this.mo=
c.mo;this.tu=c.tu;this.we=c.we;this.th=c.th;this.fr=c.fr;this.sa=c.sa;this.availability=c.availability;this.$repeatModeSummary=f("#repeatModeSummary");this.$repeat=f("#calendarista_"+this.id+"_repeat");this.$repeatOptions=f("#calendarista_"+this.id+"_repeat_options");this.$repeatFrequencySelectList=f('select[name="repeatFrequency"]');this.$repeatIntervalRow=f("#calendarista_"+this.id+"_repeatIntervalRow");this.$repeatIntervalSelectList=f('select[name="repeatInterval"]');this.$repeatWeekdayListRow=
f("#calendarista_"+this.id+"_repeatWeekdayListRow");this.$repeatWeekdayCheckboxList=this.$repeatWeekdayListRow.find('input[type="checkbox"]');this.$terminateAfterOccurrenceSelectList=f("#calendarista_"+this.id+"_terminateAfterOccurrence");this.$summary=f("#calendarista_"+this.id+"_summary");this.repeatChangedDelegate=d.createDelegate(this,this.repeatChanged);this.$repeat.on("change",this.repeatChangedDelegate);this.$repeatWeekdayCheckboxList.on("change",function(){a.setSummary()});this.$repeatIntervalSelectList.on("change",
function(){a.setSummary()});this.$terminateAfterOccurrenceSelectList.on("change",function(){a.setSummary()});this.repeatFrequencyChangedDelegate=d.createDelegate(this,this.repeatFrequencyChanged);this.$repeatFrequencySelectList.on("change",this.repeatFrequencyChangedDelegate);this.setSummary();this.repeatFrequencyChanged();this.repeatChanged()};d.repeatAppointment.prototype.repeatChanged=function(){this.$repeat.is(":checked")?this.$repeatOptions.show():this.$repeatOptions.hide()};d.repeatAppointment.prototype.mutuallyExclusive=
function(c,a){f('input[name="'+a+'"]:checked').each(function(){var b=f(this);c.val()===b.val()&&b.prop("checked",false)})};d.repeatAppointment.prototype.deleteAvailabilityButtonState=function(){this.$availabilityCheckboxes.is(":checked")?this.$availabilityDeleteButton.prop("disabled",false):this.$availabilityDeleteButton.prop("disabled",true)};d.repeatAppointment.prototype.repeatFrequencyChanged=function(){var c=parseInt(this.$repeatFrequencySelectList.val(),10),a=parseInt(this.$repeatIntervalSelectList.val(),
10);this.$repeatWeekdayListRow.hide();this.$repeatWeekdayCheckboxList.prop("disabled",true);switch(c){case 1:this.everyDaySummary.replace("%s",a);break;case 5:this.$repeatWeekdayListRow.show();this.$repeatWeekdayCheckboxList.prop("disabled",false);this.getSelectedWeekdaySummary();break;case 6:this.everyMonth.replace("%s",a);break;case 7:this.everyYear.replace("%s",a)}this.setSummary()};d.repeatAppointment.prototype.getSelectedWeekdaySummary=function(){var c,a,b=[],e,g=this.$repeatWeekdayListRow.find("input:checked"),
h=parseInt(this.$repeatIntervalSelectList.val(),10);for(c=0;c<g.length;c++){a=parseInt(f(g[c]).val(),10);switch(a){case 7:e=this.su;break;case 1:e=this.mo;break;case 2:e=this.tu;break;case 3:e=this.we;break;case 4:e=this.th;break;case 5:e=this.fr;break;case 6:e=this.sa}b.push(e)}if(b.length===7)return this.everyDayOfTheWeek.replace("%s",h);return this.everyWeekOn.replace("%s",h).replace("%s",b.join(","))};d.repeatAppointment.prototype.setSummary=function(){var c=parseInt(this.$repeatFrequencySelectList.val(),
10),a="",b=parseInt(this.$repeatIntervalSelectList.val(),10),e=parseInt(this.$terminateAfterOccurrenceSelectList.val(),10);switch(c){case 1:a=this.everyDaySummary.replace("%s",b);break;case 5:a=this.getSelectedWeekdaySummary();break;case 6:a=this.everyMonth.replace("%s",b);break;case 7:a=this.everyYear.replace("%s",b)}if(!isNaN(e)&&e!==0)if(e===1)a=this.justOnce;else a+=", "+this.occurrenceTimes.replace("%s",this.$terminateAfterOccurrenceSelectList.val());this.$summary.html(a)}})(window.jQuery,window.Calendarista);
(function(f,d){d.checkout=function(c){this.init(c);this.unloadDelegate=d.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};d.checkout.prototype.init=function(c){this.id=c.id;this.projectId=c.projectId;this.ajaxUrl=c.ajaxUrl;this.$root=f("#"+this.id);this.actionCostSummary="calendarista_cost_summary";this.actionValidateCoupon="calendarista_coupon_validator";this.wooCommerceAction="calendarista_woocommerce_submit";this.ajax=new d.ajax({ajaxUrl:this.ajaxUrl,id:this.id});this.$bookNowButton=
this.$root.find('button[name="booknow"]');this.$costSummaryPlaceholder=this.$root.find(".calendarista-cost-summary-placeholder");this.$stagingId=this.$root.find('input[name="stagingId"]');this.$viewstate=this.$root.find('input[name="__viewstate"]');this.$paymentType=this.$root.find('input[name="paymentType"]');this.creditCardSection=this.$root.find("#collapse_creditcard_"+this.projectId);this.$coupon=this.$root.find('input[name="coupon"]');this.couponMinimumAmountError=this.$coupon.attr("data-calendarista-coupon-minimum-amount-error");
this.couponInvalidError=this.$coupon.attr("data-calendarista-coupon-invalid-error");this.$couponButton=this.$root.find('button[name="couponButton"]');this.$couponResetButton=this.$root.find('button[name="couponResetButton"]');this.$paymentOperatorForms=this.$root.find("form[data-calendarista-payment-operator]");this.$panels=this.$root.find(".calendarista-collapsable");this.$coupon.length>0&&this.$coupon.parsley().on("field:success",d.createDelegate(this,this.removeCouponError));this.$couponButton.on("click",
d.createDelegate(this,this.couponButtonClicked));this.$couponResetButton.on("click",d.createDelegate(this,this.resetCouponClicked));this.$paymentType.on("change",d.createDelegate(this,this.paymentTypeChanged))};d.checkout.prototype.resetCouponClicked=function(){var c;this.$coupon.val()&&this.$coupon.val("");this.resetTotal();this.costSummaryRequest();this.removeCouponError();c=this.$root.find('input[name="paymentMethod"]');if(c.is(":disabled")){c.prop("disabled",false);f(c[0]).prop("checked",true);
this.paymentLabelStatus(c,"show")}};d.checkout.prototype.removeCouponError=function(){this.$coupon.parsley().removeError("couponerror",{updateClass:true})};d.checkout.prototype.couponButtonClicked=function(){this.$coupon.val();var c;this.removeCouponError();c=this.$coupon.parsley?this.$coupon.parsley().validate():true;c!==null&&typeof c==="object"&&c.length>0?this.costSummaryRequest():this.couponValidator()};d.checkout.prototype.couponValidator=function(){var c=[{name:"projectId",value:this.projectId},
{name:"coupon",value:this.$coupon.val()},{name:"action",value:this.actionValidateCoupon},{name:"total",value:this.$root.find('input[name="totalAmountBeforeDiscount"]').val()}];this.ajax.request(this,this.validationResponse,f.param(c))};d.checkout.prototype.validationResponse=function(c){c=window.JSON.parse(c);var a=this.$root.find('input[name="paymentMethod"]');if(!c.isValid&&c.orderMinimum)this.$coupon.parsley().addError("couponerror",{message:this.couponMinimumAmountError.replace("%s",c.orderMinimum),
updateClass:true});else c.isValid||this.$coupon.parsley().addError("couponerror",{message:this.couponInvalidError,updateClass:true});if(c.isValid&&c.fullDiscount){a.prop("checked",false);a.prop("disabled",true);this.$panels.calendaristaCollapse("hide");a.length===1&&this.paymentLabelStatus(a,"hide")}else this.paymentLabelStatus(a,"show");this.updateTotal(c);this.costSummaryRequest()};d.checkout.prototype.paymentLabelStatus=function(c,a){var b,e;for(b=0;b<c.length;b++){e=f(c[b]);this.paymentMethodChanged(e,
a);e=this.$root.find('label[for="'+e.prop("id")+'"]');if(a==="hide")e.addClass("hide");else e.hasClass("hide")&&e.removeClass("hide")}};d.checkout.prototype.paymentMethodChanged=function(c,a){var b=c.attr("data-calendarista-inline-form"),e=this.$root.find(this.$root.find(c.val()).attr("data-calendarista-operator-panel"));if(e.hasClass("in")&&a==="hide")e.calendaristaCollapse("hide");else!e.hasClass("in")&&c.prop("checked")&&b&&e.calendaristaCollapse("show")};d.checkout.prototype.updateTotal=function(c){var a,
b,e,g;for(a=0;a<this.$paymentOperatorForms.length;a++){b=f(this.$paymentOperatorForms[a]);e=b.attr("data-calendarista-total-name");g=b.attr("data-calendarista-payment-operator");g=g==="stripe"&&c.totalCents?c.totalCents:c.total;b.find('input[name="'+e+'"]').val(g)}};d.checkout.prototype.resetTotal=function(){var c,a,b,e;for(c=0;c<this.$paymentOperatorForms.length;c++){a=f(this.$paymentOperatorForms[c]);b=a.attr("data-calendarista-total-name");e=a.attr("data-calendarista-original-total");a.find('input[name="'+
b+'"]').val(e)}};d.checkout.prototype.costSummaryRequest=function(){var c=[{name:"coupon",value:this.$coupon.val()},{name:"postbackStep",value:"checkout"},{name:"projectId",value:this.projectId},{name:"stagingId",value:this.$stagingId.val()},{name:"__viewstate",value:this.$viewstate.val()},{name:"action",value:this.actionCostSummary}];this.ajax.request(this,this.costSummaryResponse,f.param(c))};d.checkout.prototype.costSummaryResponse=function(c){this.$costSummaryPlaceholder.html(c)};d.checkout.prototype.costSummaryReset=
function(){this.$costSummaryPlaceholder.html("")};d.checkout.prototype.wooCommerceSubmit=function(c){c=c.serializeArray();c.push({name:"action",value:this.wooCommerceAction});this.ajax.request(this,this.wooCommerceResponse,f.param(c))};d.checkout.prototype.wooCommerceResponse=function(c){var a;if(c)a=window.JSON.parse(c);if(a&&a.result){c=parseInt(a.checkoutMode,10);window.location.href=c===0?a.checkoutUrl:a.cartUrl}else this.$bookNowButton.prop("disabled",false).removeClass("ui-state-disabled")};
d.checkout.prototype.paymentTypeChanged=function(c){parseInt(f(c.target).val(),10)!==1&&this.creditCardSection.calendaristaCollapse("hide")};d.checkout.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}this.$couponButton.off();this.$paymentType.off()}})(window.jQuery,window.Calendarista);
(function(f,d){d.fullcalendar=function(c){this.init(c);this.unloadDelegate=d.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};d.fullcalendar.prototype.init=function(c){var a=this;this.fullcalendarId=c.fullcalendarId;this.actionPublicFeed="calendarista_appointments_public_feed";this.ajaxUrl=c.ajaxUrl;this.$spinner=f("#"+c.spinnerId);this.projectList=c.projectList;this.view=c.view;this.formElementList=c.formElementList;this.status=c.status;this.includeNameField=c.includeNameField;
this.includeEmailField=c.includeEmailField;this.includeAvailabilityNameField=c.includeAvailabilityNameField;this.includeSeats=c.includeSeats;this.firstDayOfWeek=c.firstDayOfWeek;this.locale=c.locale;this.defaultView="dayGridMonth";this.mobileView="listWeek";if(["week","list"].indexOf(this.view)!==-1)this.defaultView="listWeek";else if(this.view==="day")this.mobileView=this.defaultView="dayGrid";else if(["month","calendar"].indexOf(this.view)!==-1)this.defaultView="dayGridMonth";this.fc=new window.FullCalendar.Calendar(f("#"+
this.fullcalendarId)[0],{plugins:["dayGrid","list"],defaultView:a.mobileCheck()?a.mobileView:a.defaultView,locale:a.locale,firstDay:a.firstDayOfWeek,themeSystem:"",header:{left:"",center:"title"},views:{dayGridMonth:{eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:false}}},windowResize:function(){if(a.mobileCheck()){if(a.defaultView==="listWeek"||a.defaultView==="dayGridMonth")a.fc.changeView("listWeek")}else a.fc.changeView(a.defaultView)},editable:false,eventLimit:true,eventSources:[{url:a.ajaxUrl,
method:"POST",extraParams:function(){return{action:a.actionPublicFeed,projectList:a.projectList,formElementList:a.formElementList,includeNameField:a.includeNameField,includeEmailField:a.includeEmailField,includeAvailabilityNameField:a.includeAvailabilityNameField,includeSeats:a.includeSeats,availabilityId:-1,syncDataFilter:1,status:a.status}},success:function(){},failure:function(){window.console.log("there was an error while fetching events!")}}],eventTimeFormat:{hour:"numeric",minute:"2-digit"},
eventRender:function(b){var e=f(b.el).find(".fc-title"),g=f(b.el).find(".fc-list-item-title"),h=b.event.extendedProps,i=b.view;if(h.headingfield)i.viewSpec.type==="listWeek"?g.html(h.rawTitle):e.html(b.event.title)},eventClick:function(){},eventPositioned:function(){},loading:function(b){b?a.showSpinner():a.hideSpinner()}});this.fc.el&&this.fc.render()};d.fullcalendar.prototype.mobileCheck=function(){if(this.defaultView=="listWeek")return true;return window.innerWidth>=768?false:true};d.fullcalendar.prototype.showSpinner=
function(){this.$spinner.removeClass("calendarista-invisible")};d.fullcalendar.prototype.hideSpinner=function(){this.$spinner.addClass("calendarista-invisible")};d.fullcalendar.prototype.getDate=function(c){var a;try{a=f.datepicker.parseDate("yy-mm-dd",c.value)}catch(b){a=null}return a};d.fullcalendar.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,window.Calendarista);
(function(f,d){d.search=function(c){this.init(c);this.unloadDelegate=d.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};d.search.prototype.init=function(c){this.id=c.id;this.actionSearch="calendarista_search";this.$root=f("#search_"+this.id);this.$searchResultPlaceHolder=this.$root.find("#search_result_"+this.id);this.ajaxUrl=c.ajaxUrl;this.spinnerId=c.spinnerId;this.ajax=new d.ajax({ajaxUrl:this.ajaxUrl,id:this.spinnerId});this.$projectList=f("#"+c.projectList);this.projectListInclusion=
c.projectListInclusion;this.$searchStartDate=f("#"+c.searchStartDate);this.$searchStartTime=f("#"+c.searchStartTime);this.$searchEndDate=f("#"+c.searchEndDate);this.$searchEndTime=f("#"+c.searchEndTime);this.$searchButton=f("#"+c.searchButton);this.dateFormat=c.dateFormat?c.dateFormat:"DD, d MM, yy";this.firstDayOfWeek=c.firstDayOfWeek;this.resultPageUrl=c.resultPageUrl;this.onSearchButtonClickDelegate=d.createDelegate(this,this.onSearchButtonClick);this.$searchButton.on("click",this.onSearchButtonClickDelegate);
this.createCalendars();this.pagerButtonDelegates()};d.search.prototype.onSearchButtonClick=function(){this.searchRequest([])};d.search.prototype.searchRequest=function(c){var a=this.$projectList.val()?parseInt(this.$projectList.val(),10):null,b=this.$searchStartDate.val()?this.toYMD(this.parseDate(this.$searchStartDate.val())):null,e=this.$searchStartTime.length>0?this.$searchStartTime.val():null,g=this.$searchEndDate.val()?this.toYMD(this.parseDate(this.$searchEndDate.val())):null,h=this.$searchEndTime.length>
0?this.$searchEndTime.val():null,i=(this.$projectList.length===0||!this.$projectList.val())&&this.projectListInclusion?this.projectListInclusion:null,k=this.$root.find('input[name="tags"]:checked'),j=[];f.each(k,function(){j.push(f(this).val())});c.push({name:"projectId",value:a});c.push({name:"projectList",value:i});c.push({name:"fromDate",value:b});c.push({name:"fromTime",value:e});c.push({name:"toDate",value:g});c.push({name:"toTime",value:h});c.push({name:"tags",value:j});if(this.resultPageUrl){c.push({name:"search-result-inline",
value:true});if(this.resultPageUrl.indexOf("?")===-1)this.resultPageUrl+="?";c=this.resultPageUrl+f.param(c);this.$searchButton.prop("href",c)}else{c.push({name:"action",value:this.actionSearch});this.ajax.request(this,this.searchResponse,f.param(c))}};d.search.prototype.searchResponse=function(c){this.$nextPage&&this.$nextPage.off();this.$lastPage&&this.$lastPage.off();this.$prevPage&&this.$prevPage.off();this.$firstPage&&this.$firstPage.off();this.$searchResultPlaceHolder.html(c);this.pagerButtonDelegates()};
d.search.prototype.createCalendars=function(){var c=new Date;this.onStartDateSelectDelegate=d.createDelegate(this,this.onStartDateSelect);this.onEndDateSelectDelegate=d.createDelegate(this,this.onEndDateSelect);this.onStartDateCloseDelegate=d.createDelegate(this,this.onStartDateClose);this.onEndDateCloseDelegate=d.createDelegate(this,this.onEndDateClose);this.$searchStartDate.datepicker({dateFormat:this.dateFormat,firstDay:this.firstDayOfWeek,defaultDate:c,minDate:c,onSelect:this.onStartDateSelectDelegate,
onClose:this.onStartDateCloseDelegate,showButtonPanel:true,closeText:"Clear"});this.$searchEndDate.datepicker({dateFormat:this.dateFormat,firstDay:this.firstDayOfWeek,defaultDate:c,minDate:c,onSelect:this.onEndDateSelectDelegate,onClose:this.onEndDateCloseDelegate,showButtonPanel:true,closeText:"Clear"});this.$searchStartDate.datepicker().datepicker("setDate",c.setDate(c.getDate()));this.$datepickerElement=f("#ui-datepicker-div");this.createUniqueCalendar()};d.search.prototype.onStartDateSelect=function(){};
d.search.prototype.onEndDateSelect=function(){};d.search.prototype.onStartDateClose=function(c){var a=window.event||arguments.callee.caller.caller.caller.arguments[0];c&&this.parseDate(c);c&&this.$searchStartDate.parsley().reset();if(a&&f(a.delegateTarget).hasClass("ui-datepicker-close"))this.datepickerReset();else if(this.startDateSelected!==c){this.startDateSelected=c;this.$searchEndDate&&this.$searchEndDate.length>0&&this.$searchEndDate.datepicker("option","minDate",this.parseDate(c))}};d.search.prototype.onEndDateClose=
function(c){var a=window.event||arguments.callee.caller.caller.caller.arguments[0];c&&this.parseDate(c);c&&this.$searchEndDate.parsley().reset();if(a&&f(a.delegateTarget).hasClass("ui-datepicker-close"))this.datepickerReset();else if(this.endDateSelected!==c){this.endDateSelected=c;this.$searchStartDate.datepicker("option","maxDate",this.parseDate(c))}};d.search.prototype.pagerButtonDelegates=function(){var c=this;this.$nextPage=this.$searchResultPlaceHolder.find("a.calendarista-next-page");this.$lastPage=
this.$searchResultPlaceHolder.find("a.calendarista-last-page");this.$prevPage=this.$searchResultPlaceHolder.find("a.calendarista-prev-page");this.$firstPage=this.$searchResultPlaceHolder.find("a.calendarista-first-page");this.$nextPage.on("click",function(a){a.preventDefault();c.gotoPage(a);return false});this.$lastPage.on("click",function(a){a.preventDefault();c.gotoPage(a);return false});this.$prevPage.on("click",function(a){a.preventDefault();c.gotoPage(a);return false});this.$firstPage.on("click",
function(a){a.preventDefault();c.gotoPage(a);return false})};d.search.prototype.gotoPage=function(c){c=(c=parseInt(f(c.currentTarget).attr("data-calendarista-paged"),10))?[{name:"paged",value:c}]:[];this.$nextPage.off();this.$lastPage.off();this.$prevPage.off();this.$firstPage.off();this.searchRequest(c)};d.search.prototype.datepickerReset=function(){var c=new Date;this.$searchStartDate.datepicker("setDate",null);this.$searchEndDate.length>0&&this.$searchEndDate.datepicker("setDate",null);this.$searchStartDate.datepicker("option",
"minDate",c);this.$searchStartDate.datepicker("option","maxDate",null);this.$searchEndDate.datepicker("option","minDate",c);this.endDateSelected=this.startDateSelected=null};d.search.prototype.createUniqueCalendar=function(){if(!this.$datepickerElement.hasClass("calendarista-calendar-search")){this.$datepickerElement.removeClass(this.$datepickerElement.attr("data-calendarista-classname")+" calendarista-flat calendarista-borderless");this.$datepickerElement.removeAttr("data-calendarista-classname");
this.$datepickerElement.attr("data-calendarista-classname","calendarista-calendar-search");this.$datepickerElement.addClass("calendarista-calendar-search calendarista-flat calendarista-borderless");this.$datepickerElement.addClass("calendarista-datepicker")}};d.search.prototype.parseDate=function(c){return f.datepicker.parseDate(this.dateFormat,c)};d.search.prototype.pad=function(c){return("0"+c).slice(-2)};d.search.prototype.toYMD=function(c){var a=c.getFullYear().toString(),b=(c.getMonth()+1).toString();
c=c.getDate().toString();return a+"-"+this.pad(b)+"-"+this.pad(c)};d.search.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",this.unloadDelegate);delete this.unloadDelegate}}})(window.jQuery,window.Calendarista);
(function(f,d){d.customForm=function(c){this.init(c);this.unloadDelegate=d.createDelegate(this,this.unload);f(window).on("unload",this.unloadDelegate)};d.customForm.prototype.init=function(c){this.id=c.id;this.projectId=c.projectId;this.actionCreateUser="calendarista_create_user";this.actionSignOn="calendarista_signon";this.actionCustomTypeChanged="calendarista_customer_type_changed";this.ajaxUrl=c.ajaxUrl;this.membershipRequired=c.membershipRequired;this.$root=f("#"+this.id);this.ajax=new d.ajax({ajaxUrl:this.ajaxUrl,
id:this.id});this.$viewState=this.$root.find('input[name="__viewstate"]');this.$customerTypeContainer=this.$root.find(".customer-type-container");this.$customerType=this.$root.find('input[name="customerType"]');this.$phoneNumberFields=this.$root.find(".calendarista-phone");this.$email=this.$root.find('input[name="email"]');this.$name=this.$root.find('input[name="name"]');this.$password=this.$root.find('input[name="password"]');this.$createUserValidator=this.$root.find('input[name="createUserValidator"]');
this.$signOnValidator=this.$root.find('input[name="signOnValidator"]');this.$nextButton=this.$root.find('button[name="next"]');this.$customerType.on("change",d.createDelegate(this,this.customerTypeChanged));this.nextButtonClickDelegate=d.createDelegate(this,this.nextButtonClicked);this.$nextButton.on("click",this.nextButtonClickDelegate);this.phoneNumberKeyUpDelegate=d.createDelegate(this,this.phoneNumberKeyUp);this.$phoneNumberFields.on("keyup",this.phoneNumberKeyUpDelegate);this.$container=this.$root.find(".calendarista-custom-form");
window.Parsley.addValidator("calendaristaPhone",{validateString:function(a,b){if(!window.libphonenumber)return true;return window.libphonenumber.isValidNumber(a,b)}})};d.customForm.prototype.phoneNumberKeyUp=function(c){var a=f(c.currentTarget),b=a.attr("data-parsley-calendarista-phone"),e=a.val();if(window.libphonenumber&&(c.keyCode!=46&&c.keyCode!=8||window.libphonenumber.isValidNumber(e,b))){c=(new window.libphonenumber.AsYouType(b)).input(e);a.val(c)}};d.customForm.prototype.nextButtonClicked=
function(){var c,a=parseInt(this.$customerType.filter(":checked").val(),10);if(d.wizard.isValid(this.$root)){if(this.membershipRequired){c=[{name:"projectId",value:this.projectId},{name:"name",value:this.$name.val()},{name:"email",value:this.$email.val()},{name:"password",value:this.$password.val()}];if(a===0&&!this.$customerTypeContainer.hasClass("hide")){this.$createUserValidator.val("");c.push({name:"action",value:this.actionCreateUser});this.ajax.request(this,this.createUserResponse,f.param(c))}else if(a===1){this.$signOnValidator.val("");c.push({name:"action",value:this.actionSignOn});this.ajax.request(this,this.signOnResponse,f.param(c))}}this.unload()}};d.customForm.prototype.createUserResponse=function(c){var a=this.$root.find(".create-user-error");if(c==="null"){d.wizard.isValid(this.$root);a.removeClass("hide")}this.$createUserValidator.val(1);if(c!=="null"){a.addClass("hide");this.$customerTypeContainer.addClass("hide");this.$nextButton.click()}};d.customForm.prototype.signOnResponse=function(c){var a=
this.$root.find(".signon-error");if(c==="null"){d.wizard.isValid(this.$root);a.removeClass("hide")}this.$signOnValidator.val(1);if(c!=="null"){a.addClass("hide");this.$customerType.filter('[value="0"]').prop("checked",true);this.customerTypeRequest();this.$customerTypeContainer.addClass("hide")}};d.customForm.prototype.customerTypeChanged=function(){this.customerTypeRequest()};d.customForm.prototype.customerTypeRequest=function(){var c=[{name:"customerType",value:parseInt(this.$customerType.filter(":checked").val(),
10)},{name:"projectId",value:this.projectId},{name:"__viewstate",value:this.$viewState.val()},{name:"action",value:this.actionCustomTypeChanged}];this.ajax.request(this,this.customerTypeChangedResponse,f.param(c))};d.customForm.prototype.customerTypeChangedResponse=function(c){this.$container.html(c);this.$email=this.$root.find('input[name="email"]');this.$name=this.$root.find('input[name="name"]');this.$password=this.$root.find('input[name="password"]')};d.customForm.prototype.unload=function(){if(this.unloadDelegate){f(window).off("unload",
this.unloadDelegate);delete this.unloadDelegate}this.$customerType.off();this.$root.off("click",'button[name="next"]',this.nextButtonClickDelegate)}})(window.jQuery,window.Calendarista);